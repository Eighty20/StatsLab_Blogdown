<!DOCTYPE html>
<html lang="en" class="wf-firasans-n4-active wf-active">
	<head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Enable responsiveness on mobile devices --> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    
    	
    <meta name="generator" content="Hugo 0.44" />
    
    <title>Blogging from a Python Jupyter Notebook &middot; </title>
    <meta content="Blogging from a Python Jupyter Notebook - " property="og:title">
    <meta content=" - " property="og:description">    
    <!-- CSS --> 
    <link rel="stylesheet" href="../../css/print.css" media="print">
    <link rel="stylesheet" href="../../css/poole.css">
    <link rel="stylesheet" href="../../css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans:300,300i,400,400i,500">
    
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <!-- highlight.js--> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <!-- Customised CSS -->
    <link rel="stylesheet" href="../../css/custom.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="../../favicon.png">
    

	</head>
    <body>
        <div class="sidebar">
	<div class="container text-center sidebar-sticky">
		<div class="sidebar-about text-center">
			<a href="../../"><h1 class="brand">StatsLab</h1></a>
			 <img src="../../img/stats.png" alt="Author Image" class="img-circle headshot center"> 
			<p class="lead">
				 Internal initiative at <br> <a href="http://www.eighty20.co.za/"> Eighty20</a> <br> We love R and Python 
			</p>
		</div>
		
<div>
	<ul class="sidebar-nav">
		
		
				<li>
					<a href="../../posts/"> <span>Posts</span></a>
				</li>
				<li>
					<a href="../../about_me/"> <span>About</span></a>
				</li>
				<li>
					<a href="../../tags/"> <span>Search by Tag</span></a>
				</li>
		</li>
	</ul>
</div>

        <p>
		<section class="row text-center">
	
	
	
	
	
	
	
	
	
	
</section>

        </p>
        </p>
	</div>
	<div>
	</div>
</div>

        <div class="content container">
            <div class="post">
  <h1>Blogging from a Python Jupyter Notebook</h1>
  
  <div class="col-sm-12 col-md-12">
    <span class="text-left post-date meta">
            
       <i class="fa fa-calendar" aria-hidden="true"></i> Mar 3, 2018 
      
      
        
        
            in
            
            
                <a class="meta" href="../../categories/python">PYTHON</a>
                
            
        
      
      
      
        
        
            <br/>
             <i class="fa fa-tags" aria-hidden="true"></i>
            
            <a class="meta" href="../../tags/blogdown">blogdown</a> 
        
            <a class="meta" href="../../tags/python">python</a>
        
      
      
      </span>  
  </div>    
  
  

<p>This is a follow on post to Stefan&rsquo;s <a href="../../posts/how_to_add_a_blog/">original</a> to show how to generate a blog post from a Jupyter Notebook instead of an R markdown. This post itself started off life as a Jupyter Notebook which lives in the same <code>content/posts</code> folder as the other Rmd files used for the site. We&rsquo;ll walk through how it became a blog post.</p>

<p>The process is a little more complicated than for the Rmd files (since that&rsquo;s what Blogdown was built for but we can still get it to work relatively easily. The process will involve setting up the Jupyter Notebook as usual, converting to a standard Markdown file, and then making some minor edits to make sure everything displays correctly.</p>

<h2 id="step-0-start-off-with-the-header-block">Step 0: Start off with the header block</h2>

<p>The first thing you&rsquo;ll notice (if you&rsquo;re looking at the original notebook file) is the Rmd style header block at the top of the notebook. This would not generally be part of a Jupyter Notebook or a regular Markdown file, but Blogdown requires it so that it knows what to do with this post we I just copy-pasted one from another post and edited it accordingly.</p>

<p>For this post it looks like</p>

<pre><code>---
title: Blogging from a Python Jupyter Notebook
author: Marlan
date: 2018-03-30
categories:
  - Python
tags:
  - Blogdown
  - Python
output:
  blogdown::html_page:
    toc: true
---
</code></pre>

<h2 id="step-1-prepare-a-jupyter-notebook-with-some-useful-content">Step 1: Prepare a Jupyter Notebook with some useful content</h2>

<h3 id="basic-formatting">Basic Formatting</h3>

<p>We&rsquo;ll start off with some text.</p>

<p>You can use all the usual markdown stuff like <strong>bold</strong> text and <em>italics</em>,</p>

<p>quotes
&gt; Beautiful is better than ugly.<br />
Explicit is better than implicit.<br />
Simple is better than complex.<br />
Complex is better than complicated.</p>

<p>and lists</p>

<ul class="task-list">
<li><label><input type="checkbox" checked disabled class="task-list-item"> Write a blog on writing blogs</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> Write a blog that&rsquo;s not quite so meta</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> Do some actual analytics</label></li>
</ul>

<p>Jupyter uses the same flavour of markdown as Github so you can refer to the reference <a href="https://help.github.com/articles/basic-writing-and-formatting-syntax/">here</a> for more complicated formatting</p>

<h3 id="images">Images</h3>

<p><img src="../../Pictures/python_meme.jpg" alt="python meme" /></p>

<p>Place any images you want to include in the <code>static/Pictures</code> folder (create a specific folder in there for your post to keep things neat).</p>

<p>The syntax to insert an image is the same as in the Rmd. For example, for the image above I used</p>

<pre><code class="language-md">![python meme](../../static/Pictures/python_meme.jpg)
</code></pre>

<p>Note that I used the relative path to the image from the <code>content/Posts</code> folder so that the image displays correctly in the Jupyter Notebook. If you used this as is in Blogdown, it wouldn&rsquo;t work (you&rsquo;d see a broken image link with the alt text <em>python meme</em>).</p>

<p>Paths are a bit tricksy in Blogdown. It considers the <code>static</code> folder to be the root so we&rsquo;ll have to change this in the final markdown to</p>

<pre><code class="language-md">![python meme](/Pictures/python_meme.jpg)
</code></pre>

<h3 id="code">Code</h3>

<p>Of course the whole point of doing this in a Jupyter Notebook is to actually write and run some code (otherwise we could just write this in plain Markdown)</p>

<p>Let&rsquo;s get some interesting data from a public api and do a quick plot. I&rsquo;m going to track driver Fernando Alonso&rsquo;s travails during the 2017 Formula 1 season, grabbing data from this <a href="https://ergast.com/mrd/">site</a>.</p>

<p>We&rsquo;ll use the <code>requests</code> library to make the HTTP GET request to the API</p>

<pre><code class="language-python">import requests
import json
</code></pre>

<pre><code class="language-python">alonso_results = requests.get(&quot;https://ergast.com/api/f1/2017/drivers/alonso/results.json&quot;).json()
print(json.dumps(alonso_results, indent=2))
</code></pre>

<pre><code>{
  &quot;MRData&quot;: {
    &quot;xmlns&quot;: &quot;http://ergast.com/mrd/1.4&quot;,
    &quot;series&quot;: &quot;f1&quot;,
    &quot;url&quot;: &quot;http://ergast.com/api/f1/2017/drivers/alonso/results.json&quot;,
    &quot;limit&quot;: &quot;30&quot;,
    &quot;offset&quot;: &quot;0&quot;,
    &quot;total&quot;: &quot;19&quot;,
    &quot;RaceTable&quot;: {
      &quot;season&quot;: &quot;2017&quot;,
      &quot;driverId&quot;: &quot;alonso&quot;,
      &quot;Races&quot;: [
        {
          &quot;season&quot;: &quot;2017&quot;,
          &quot;round&quot;: &quot;1&quot;,
          &quot;url&quot;: &quot;https://en.wikipedia.org/wiki/2017_Australian_Grand_Prix&quot;,
          &quot;raceName&quot;: &quot;Australian Grand Prix&quot;,
          &quot;Circuit&quot;: {
            &quot;circuitId&quot;: &quot;albert_park&quot;,
            &quot;url&quot;: &quot;http://en.wikipedia.org/wiki/Melbourne_Grand_Prix_Circuit&quot;,
            &quot;circuitName&quot;: &quot;Albert Park Grand Prix Circuit&quot;,
            &quot;Location&quot;: {
              &quot;lat&quot;: &quot;-37.8497&quot;,
              &quot;long&quot;: &quot;144.968&quot;,
              &quot;locality&quot;: &quot;Melbourne&quot;,
              &quot;country&quot;: &quot;Australia&quot;
            }
          },
          &quot;date&quot;: &quot;2017-03-26&quot;,
          &quot;time&quot;: &quot;05:00:00Z&quot;,
          &quot;Results&quot;: [
            {
              &quot;number&quot;: &quot;14&quot;,
              &quot;position&quot;: &quot;14&quot;,
              &quot;positionText&quot;: &quot;R&quot;,
              &quot;points&quot;: &quot;0&quot;,
              &quot;Driver&quot;: {
                &quot;driverId&quot;: &quot;alonso&quot;,
                &quot;permanentNumber&quot;: &quot;14&quot;,
                &quot;code&quot;: &quot;ALO&quot;,
                &quot;url&quot;: &quot;http://en.wikipedia.org/wiki/Fernando_Alonso&quot;,
                &quot;givenName&quot;: &quot;Fernando&quot;,
                &quot;familyName&quot;: &quot;Alonso&quot;,
                &quot;dateOfBirth&quot;: &quot;1981-07-29&quot;,
                &quot;nationality&quot;: &quot;Spanish&quot;
              },
              &quot;Constructor&quot;: {
                &quot;constructorId&quot;: &quot;mclaren&quot;,
                &quot;url&quot;: &quot;http://en.wikipedia.org/wiki/McLaren&quot;,
                &quot;name&quot;: &quot;McLaren&quot;,
                &quot;nationality&quot;: &quot;British&quot;
              },
              &quot;grid&quot;: &quot;12&quot;,
              &quot;laps&quot;: &quot;50&quot;,
              &quot;status&quot;: &quot;Vibrations&quot;,
              &quot;FastestLap&quot;: {
                &quot;rank&quot;: &quot;17&quot;,
                &quot;lap&quot;: &quot;48&quot;,
                &quot;Time&quot;: {
                  &quot;time&quot;: &quot;1:30.077&quot;
                },
                &quot;AverageSpeed&quot;: {
                  &quot;units&quot;: &quot;kph&quot;,
                  &quot;speed&quot;: &quot;211.938&quot;
                }
              }
            }
          ]
        },
        .
        .
        .
      ]
    }
  }
}
</code></pre>

<p>This JSON response is quite long, containing a lot of information we&rsquo;re not going to use (interesting though). In Jupyter, this output would be contained in a scrollable cell. For this blog post I&rsquo;ve shortened it manually in the mardown to just one result record. Let&rsquo;s strip out just the info we need from the full JSON response to a nice tidy dataframe.</p>

<pre><code class="language-python">import pandas as pd
import matplotlib.pyplot as plt
</code></pre>

<pre><code class="language-python">alonso_results_list = [
    {
        &quot;round&quot;: int(race[&quot;round&quot;]),
        &quot;started&quot;: int(race[&quot;Results&quot;][0][&quot;grid&quot;]),
        &quot;finished&quot;: int(race[&quot;Results&quot;][0][&quot;position&quot;])
    } for race in alonso_results[&quot;MRData&quot;][&quot;RaceTable&quot;][&quot;Races&quot;]
]
alonso_results_list
</code></pre>

<pre><code>[{'finished': 14, 'round': 1, 'started': 12},
 {'finished': 16, 'round': 2, 'started': 13},
 {'finished': 14, 'round': 3, 'started': 15},
 {'finished': 20, 'round': 4, 'started': 15},
 {'finished': 12, 'round': 5, 'started': 7},
 {'finished': 16, 'round': 7, 'started': 12},
 {'finished': 9, 'round': 8, 'started': 19},
 {'finished': 19, 'round': 9, 'started': 12},
 {'finished': 18, 'round': 10, 'started': 20},
 {'finished': 6, 'round': 11, 'started': 7},
 {'finished': 18, 'round': 12, 'started': 10},
 {'finished': 17, 'round': 13, 'started': 19},
 {'finished': 17, 'round': 14, 'started': 8},
 {'finished': 11, 'round': 15, 'started': 10},
 {'finished': 11, 'round': 16, 'started': 20},
 {'finished': 17, 'round': 17, 'started': 8},
 {'finished': 10, 'round': 18, 'started': 18},
 {'finished': 8, 'round': 19, 'started': 6},
 {'finished': 9, 'round': 20, 'started': 11}]
</code></pre>

<pre><code class="language-python">alonso_results_df = pd.DataFrame(alonso_results_list).set_index(&quot;round&quot;)
alonso_results_df
</code></pre>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>finished</th>
      <th>started</th>
    </tr>
    <tr>
      <th>round</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>14</td>
      <td>12</td>
    </tr>
    <tr>
      <th>2</th>
      <td>16</td>
      <td>13</td>
    </tr>
    <tr>
      <th>3</th>
      <td>14</td>
      <td>15</td>
    </tr>
    <tr>
      <th>4</th>
      <td>20</td>
      <td>15</td>
    </tr>
    <tr>
      <th>5</th>
      <td>12</td>
      <td>7</td>
    </tr>
    <tr>
      <th>7</th>
      <td>16</td>
      <td>12</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>19</td>
    </tr>
    <tr>
      <th>9</th>
      <td>19</td>
      <td>12</td>
    </tr>
    <tr>
      <th>10</th>
      <td>18</td>
      <td>20</td>
    </tr>
    <tr>
      <th>11</th>
      <td>6</td>
      <td>7</td>
    </tr>
    <tr>
      <th>12</th>
      <td>18</td>
      <td>10</td>
    </tr>
    <tr>
      <th>13</th>
      <td>17</td>
      <td>19</td>
    </tr>
    <tr>
      <th>14</th>
      <td>17</td>
      <td>8</td>
    </tr>
    <tr>
      <th>15</th>
      <td>11</td>
      <td>10</td>
    </tr>
    <tr>
      <th>16</th>
      <td>11</td>
      <td>20</td>
    </tr>
    <tr>
      <th>17</th>
      <td>17</td>
      <td>8</td>
    </tr>
    <tr>
      <th>18</th>
      <td>10</td>
      <td>18</td>
    </tr>
    <tr>
      <th>19</th>
      <td>8</td>
      <td>6</td>
    </tr>
    <tr>
      <th>20</th>
      <td>9</td>
      <td>11</td>
    </tr>
  </tbody>
</table>
</div>

<p>And then plot those results</p>

<pre><code class="language-python">alonso_results_df.plot()
</code></pre>

<p><img src="../../Pictures/Blogging_from_Jupyter_25_1.png" alt="png" /></p>

<p>All a bit up and down really.</p>

<p>Right that should be enough content for our blog.</p>

<h2 id="step-2-convert-the-jupyter-notebook-to-a-markdown-file">Step 2: Convert the Jupyter Notebook to a Markdown file</h2>

<p>Jupyter comes with a command line tool called <code>nbconvert</code> to convert notebooks to a variety of other formats. We will call it as follows</p>

<pre><code class="language-bash">jupyter nbconvert --to=markdown Blogging_from_Jupyter.ipynb
</code></pre>

<h2 id="step-3-get-everything-into-the-blogdown-project">Step 3: Get everything into the Blogdown project</h2>

<ul>
<li>Clone the StatsLab_Blogdown project with
<code>
git clone git@github.com:Eighty20/StatsLab_Blogdown.git
</code></li>
<li>Make sure you&rsquo;re up to date with the latest version
<code>
git checkout master
git pull
</code></li>
<li>Checkout a new branch
<code>
git checkout -b your_blog_post_name
</code></li>
<li>Assuming you ran the notebook and created the markdown file in some separate location, copy the markdown file to the <code>contents/posts</code> folder</li>
<li>Copy any images created into the <code>static/Pictures</code> folder. When you created the markdown file it will have created a folder in that location called <code>your_blog_post_name_Files</code>. Make sure you grab these as well</li>
<li>Open the markdown file you copied into <code>contents/posts</code> and edit any of the image file paths to <code>/Pictures/your_image_name.png</code></li>
</ul>

<h2 id="step-4-run-blogdown-in-rstudio-to-preview-the-results">Step 4: Run Blogdown in RStudio to preview the results</h2>

<h2 id="step-5-make-a-pull-request-to-the-statslab-project">Step 5: Make a pull request to the StatsLab project</h2>

<ul>
<li>Push your branch to github
<code>
git push --set-upstream origin your_blog_post_name
</code></li>
<li>Go to the github page for this project <code>https://github.com/Eighty20/StatsLab_Blogdown</code></li>
<li>From the dropdown select your branch and then click <code>New pull request</code> and follow the instructions</li>
<li>Once the pull request has been accepted your blog post should appear</li>
</ul>

<h1 id="success">SUCCESS!!!</h1>

</div>
            <div class="footer">
                <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

<script type="text/javascript">
    hljs.initHighlightingOnLoad();
</script>


        <h2>Comments</h2>
        <div id="disqus_thread"></div>
<script>
(function() {
var d = document, s = d.createElement('script');
s.src = 'https://statslab.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
<script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

            </div>
        </div>
        
                
    </body>
</html>
